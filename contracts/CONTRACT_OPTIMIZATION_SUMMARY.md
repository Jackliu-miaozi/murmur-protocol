# åˆçº¦ç˜¦èº«æ–¹æ¡ˆæ€»ç»“

## ğŸ“Š ç˜¦èº«æ•ˆæœå¯¹æ¯”

| åˆçº¦åç§°           | åŸå§‹ç‰ˆæœ¬  | ç²¾ç®€ç‰ˆæœ¬     | å‡å°‘æ¯”ä¾‹      |
| ------------------ | --------- | ------------ | ------------- |
| **VPToken**        | 127.76 KB | **75.51 KB** | **-40.9%** âœ… |
| **MurmurNFT**      | 118.82 KB | **78.33 KB** | **-34.1%** âœ… |
| **MurmurProtocol** | 15.44 KB  | -            | å·²ç»è¶³å¤Ÿå° âœ… |

## ğŸ¯ ä¼˜åŒ–æ–¹æ³•

### æ–¹æ¡ˆ 1ï¼šç²¾ç®€ä¾èµ–ï¼ˆå·²å®ç°ï¼‰

é€šè¿‡ç§»é™¤é‡é‡çº§çš„ OpenZeppelin åº“ï¼Œå®ç° 40% çš„ä½“ç§¯ç¼©å‡ï¼š

#### VPTokenLite ä¼˜åŒ–ç‚¹

- âŒ ç§»é™¤ `ERC1155Upgradeable`ï¼ˆä¸éœ€è¦æ ‡å‡† NFT æ¥å£ï¼‰
- âŒ ç§»é™¤ `AccessControlUpgradeable`ï¼ˆå¤æ‚çš„è§’è‰²ç³»ç»Ÿï¼‰
- âŒ ç§»é™¤ `OwnableUpgradeable`ï¼ˆä¸ AccessControl é‡å¤ï¼‰
- âœ… ä¿ç•™ `EIP712Upgradeable`ï¼ˆç­¾åéªŒè¯å¿…éœ€ï¼‰
- âœ… ä¿ç•™ `UUPSUpgradeable`ï¼ˆå‡çº§åŠŸèƒ½ï¼‰
- âœ… ä½¿ç”¨ç®€å•çš„ `mapping(address => uint256)` ç®¡ç†ä½™é¢
- âœ… ä½¿ç”¨ `mapping(address => bool)` ç®¡ç†æ“ä½œå‘˜æƒé™

#### MurmurNFTLite ä¼˜åŒ–ç‚¹

- âŒ ç§»é™¤ `ERC721Upgradeable`ï¼ˆæ ‡å‡† NFTï¼Œ20KB+ï¼‰
- âŒ ç§»é™¤ `AccessControlUpgradeable`
- âœ… ä¿ç•™ `ReentrancyGuardUpgradeable`ï¼ˆå®‰å…¨æ€§ï¼‰
- âœ… ä¿ç•™ `EIP712Upgradeable`
- âœ… ä½¿ç”¨ç®€å•çš„ ownership mapping

## ğŸ“¦ å½“å‰æ–‡ä»¶ç»“æ„

```
contracts/
â”œâ”€â”€ VPToken.sol              # åŸå§‹ç‰ˆæœ¬ï¼ˆ127 KBï¼‰
â”œâ”€â”€ VPTokenLite.sol          # ç²¾ç®€ç‰ˆæœ¬ï¼ˆ75 KBï¼‰âœ¨
â”œâ”€â”€ MurmurNFT.sol            # åŸå§‹ç‰ˆæœ¬ï¼ˆ118 KBï¼‰
â”œâ”€â”€ MurmurNFTLite.sol        # ç²¾ç®€ç‰ˆæœ¬ï¼ˆ78 KBï¼‰âœ¨
â”œâ”€â”€ MurmurProtocol.sol       # åè®®æ³¨å†Œè¡¨ï¼ˆ15 KBï¼‰
â””â”€â”€ VDOTToken.sol            # vDOT ä»£å¸ï¼ˆ28 KBï¼‰
```

## âš ï¸ PolkaVM ç¯å¢ƒè¯´æ˜

**é‡è¦**ï¼šæ‚¨çš„ `hardhat.config.js` å¯ç”¨äº† `polkavm: true`ï¼Œè¿™æ„å‘³ç€ï¼š

1. **ç”Ÿæˆçš„æ˜¯ RISC-V å­—èŠ‚ç **ï¼Œä¸æ˜¯æ ‡å‡† EVM å­—èŠ‚ç 
2. **PolkaVM é“¾æ²¡æœ‰ 24KB é™åˆ¶**ï¼ˆé€šå¸¸å…è®¸ 512KB - 1MBï¼‰
3. **å³ä½¿åŸå§‹ç‰ˆæœ¬ï¼ˆ127KBï¼‰ä¹Ÿå¯ä»¥æ­£å¸¸éƒ¨ç½²**

### å¦‚æœéƒ¨ç½²åˆ° PolkaVM (Asset Hub / Revive)

- âœ… ç›´æ¥ä½¿ç”¨åŸå§‹ç‰ˆæœ¬ï¼ˆVPToken.sol, MurmurNFT.solï¼‰
- âœ… äº«å—å®Œæ•´çš„ OpenZeppelin å®‰å…¨æ€§å’Œæ ‡å‡†å…¼å®¹æ€§

### å¦‚æœéƒ¨ç½²åˆ°æ ‡å‡† EVM é“¾

- âš ï¸ å¿…é¡»ä½¿ç”¨ç²¾ç®€ç‰ˆæœ¬ï¼ˆVPTokenLite.sol, MurmurNFTLite.solï¼‰
- âš ï¸ æˆ–è€…å¼€å¯ Solidity Optimizer æ›´é«˜çš„è¿è¡Œæ¬¡æ•°
- âš ï¸ æˆ–è€…è€ƒè™‘ Diamond Pattern è¿›ä¸€æ­¥æ‹†åˆ†

## ğŸš€ ä¸‹ä¸€æ­¥æ“ä½œ

### é€‰é¡¹ Aï¼šä½¿ç”¨ç²¾ç®€ç‰ˆæœ¬

æ›´æ–°éƒ¨ç½²è„šæœ¬ä½¿ç”¨ `VPTokenLite` å’Œ `MurmurNFTLite`ï¼š

```javascript
// scripts/deploy_upgradeable_lite.js
const VPToken = await ethers.getContractFactory("VPTokenLite");
const MurmurNFT = await ethers.getContractFactory("MurmurNFTLite");
// ...
```

### é€‰é¡¹ Bï¼šä¿æŒåŸå§‹ç‰ˆæœ¬ï¼ˆæ¨èç»™ PolkaVMï¼‰

å¦‚æœæ‚¨ç¡®å®šåªéƒ¨ç½²åˆ° PolkaVM ç¯å¢ƒï¼Œç»§ç»­ä½¿ç”¨åŸå§‹ç‰ˆæœ¬å³å¯ã€‚

### é€‰é¡¹ Cï¼šè¿›ä¸€æ­¥æ‹†åˆ†ï¼ˆDiamond Patternï¼‰

å¦‚æœä»ç„¶éœ€è¦è¿›ä¸€æ­¥å‡å°ï¼Œå¯ä»¥è€ƒè™‘ï¼š

1. å°† VP è®¡ç®—é€»è¾‘æ‹†åˆ†åˆ°ç‹¬ç«‹çš„ Library
2. ä½¿ç”¨ Diamond Pattern (EIP-2535) å°†åŠŸèƒ½æ‹†åˆ†æˆå¤šä¸ª Facet
3. å°†æ‰¹é‡æ“ä½œå’Œå•ç”¨æˆ·æ“ä½œæ‹†åˆ†åˆ°ä¸åŒçš„åˆçº¦

## ğŸ“ åŠŸèƒ½å¯¹æ¯”

### VPTokenLite vs VPToken

| åŠŸèƒ½               | VPTokenLite  | VPToken (Full) |
| ------------------ | ------------ | -------------- |
| è´¨æŠ¼ vDOT è·å– VP  | âœ…           | âœ…             |
| æç° vDOT          | âœ…           | âœ…             |
| æ‰¹é‡ Mint/Burn     | âœ…           | âœ…             |
| EIP-712 ç­¾åéªŒè¯   | âœ…           | âœ…             |
| å¯å‡çº§ï¼ˆUUPSï¼‰     | âœ…           | âœ…             |
| ERC1155 æ ‡å‡†       | âŒ           | âœ…             |
| AccessControl è§’è‰² | âŒï¼ˆç®€åŒ–ç‰ˆï¼‰ | âœ…             |

### MurmurNFTLite vs MurmurNFT

| åŠŸèƒ½             | MurmurNFTLite | MurmurNFT (Full) |
| ---------------- | ------------- | ---------------- |
| Mint NFT         | âœ…            | âœ…               |
| EIP-712 ç­¾å     | âœ…            | âœ…               |
| Token URI        | âœ…            | âœ…               |
| å¯å‡çº§ï¼ˆUUPSï¼‰   | âœ…            | âœ…               |
| ERC721 æ ‡å‡†      | âŒ            | âœ…               |
| Transfer/Approve | ç®€åŒ–ç‰ˆ        | å®Œæ•´æ”¯æŒ         |

## ğŸ”§ éƒ¨ç½²å»ºè®®

1. **æµ‹è¯•ç¯å¢ƒ**ï¼šå…ˆç”¨ç²¾ç®€ç‰ˆæœ¬æµ‹è¯•åŠŸèƒ½å®Œæ•´æ€§
2. **ç”Ÿäº§ç¯å¢ƒ**ï¼š
   - PolkaVM â†’ ä½¿ç”¨å®Œæ•´ç‰ˆæœ¬ï¼ˆæ›´å®‰å…¨ã€æ›´æ ‡å‡†ï¼‰
   - EVM â†’ ä½¿ç”¨ç²¾ç®€ç‰ˆæœ¬ï¼ˆç¬¦åˆå¤§å°é™åˆ¶ï¼‰
3. **å…¼å®¹æ€§**ï¼šç²¾ç®€ç‰ˆæœ¬ä¿ç•™äº†æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½ï¼Œåªæ˜¯å»é™¤äº†æ ‡å‡† Token æ¥å£

---

ç”Ÿæˆæ—¶é—´ï¼š2026-01-17
